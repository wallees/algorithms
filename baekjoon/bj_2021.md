# 2021. ìµœì†Œ í™˜ìŠ¹ ê²½ë¡œ

## Summary

ğŸ™‡â€â™‚ï¸ URL : https://www.acmicpc.net/problem/2021  
ğŸ¤·â€â™‚ï¸ Difficulty: ?  
ğŸ’†â€â™‚ï¸ Submissions : Success

## Source code

```java
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.util.*;

public class App {

    static int N, L;
    static boolean[] visitedLine;
    static boolean[] visitedStation;

    static HashMap<Integer, ArrayList<Integer>> lineInfo = new HashMap<>();      // ë…¸ì„  ë³„ ì •ì°¨í•˜ëŠ” ì—­ì˜ ìˆ˜ -> ë…¸ì„  ë§Œí¼ì˜ ê°¯ìˆ˜ í• ë‹¹
    static HashMap<Integer, ArrayList<Integer>> stationInfo = new HashMap<>();   // ì—­ ë³„ ì •ì°¨í•˜ëŠ” ë…¸ì„ ì˜ ìˆ˜ -> ì—­ ë§Œí¼ì˜ ê°¯ìˆ˜ í• ë‹¹
    
    public static void main(String[] args) throws Exception {
        
        // ì–´ë–¤ ë„ì‹œì˜ ì§€í•˜ì²  ë…¸ì„ ì— ëŒ€í•œ ì •ë³´ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, ì¶œë°œì§€ì—ì„œ ëª©ì ì§€ê¹Œì§€ì˜ ìµœì†Œ í™˜ìŠ¹ ê²½ë¡œë¥¼ êµ¬í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ì‹œì˜¤. ì‹¤ì œ ê²½ë¡œë¥¼ êµ¬í•  í•„ìš”ëŠ” ì—†ê³ , í™˜ìŠ¹ íšŒìˆ˜ë§Œì„ êµ¬í•˜ë©´ ëœë‹¤.
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        StringTokenizer st = new StringTokenizer(br.readLine());

        // ì²«ì§¸ ì¤„ì— ì—­(Station)ì˜ ê°œìˆ˜ N(1â‰¤Nâ‰¤100,000), ë…¸ì„ (Line)ì˜ ê°œìˆ˜ L(1â‰¤Lâ‰¤100,000)ì´ ì£¼ì–´ì§„ë‹¤. 
        N = Integer.parseInt(st.nextToken());
        L = Integer.parseInt(st.nextToken());

        visitedStation = new boolean[N+1];
        visitedLine = new boolean[L+1];

        for(int i=1; i<=L; i++) {
            // ë‹¤ìŒ Lê°œì˜ ì¤„ì—ëŠ” ê° ë…¸ì„ ì´ ì§€ë‚˜ëŠ” ì—­ì´ ìˆœì„œëŒ€ë¡œ ì£¼ì–´ì§€ë©°,
            String[] l = br.readLine().split(" ");
            for (String station : l) {
                int s = Integer.parseInt(station);
                if (s == -1) {
                    // ê° ì¤„ì˜ ë§ˆì§€ë§‰ì—ëŠ” -1ì´ ì£¼ì–´ì§„ë‹¤.
                    break;
                }
                // ì—­ ë§ˆë‹¤ ì •ì°¨í•˜ëŠ” ë…¸ì„  í•´ì‹œë§µ ìƒì„± (lineInfo)
                if (lineInfo.get(i) == null) {
                    ArrayList<Integer> stationsWhereLineStop = new ArrayList<>();
                    stationsWhereLineStop.add(s);
                    lineInfo.put(i, stationsWhereLineStop);
                } else {
                    lineInfo.get(i).add(s);
                }

                // ë…¸ì„ ë§ˆë‹¤ ì •ì°¨í•˜ëŠ” ì—­ í•´ì‹œë§µ ìƒì„± (stationInfo)
                if (stationInfo.get(s) == null) {
                    ArrayList<Integer> lineInStation = new ArrayList<>();
                    lineInStation.add(i);
                    stationInfo.put(s, lineInStation);
                } else {
                    stationInfo.get(s).add(i);
                }
            }
        }

        // ë§ˆì§€ë§‰ ì¤„ì—ëŠ” ì¶œë°œì§€ ì—­ì˜ ë²ˆí˜¸(startStation)ì™€ ëª©ì ì§€ ì—­(endStation)ì˜ ë²ˆí˜¸ê°€ ì£¼ì–´ì§„ë‹¤
        st = new StringTokenizer(br.readLine());
        int startStation = Integer.parseInt(st.nextToken());    
        int endStation = Integer.parseInt(st.nextToken());

        System.out.println(solution(startStation, endStation));
    }

    public static int solution(int start, int end) {

        // í˜„ì¬ ì—­ì˜ ì •ë³´ë¥¼ ì €ì¥í•  ìë£Œêµ¬ì¡°
        class Ticket {
            int station;
            int line;
            int transferCount;
            public Ticket(int station, int line, int transferCount) {
                this.station = station;
                this.line = line;
                this.transferCount = transferCount;
            }
        }


        // í™˜ìŠ¹ íšŸìˆ˜ë¥¼ ìš°ì„ ìˆœìœ„ë¡œ í•˜ëŠ” í ìƒì„±
        PriorityQueue<Ticket> queue = new PriorityQueue<>(
            Comparator.comparingInt(t -> t.transferCount)
        );

        // ì‹œì‘ ì—­ì—ì„œ íƒˆ ìˆ˜ ìˆëŠ” ëª¨ë“  ë…¸ì„  ì •ë³´ë¥¼ ë¨¼ì € ìš°ì„ ìˆœìœ„ íì— ì €ì¥
        ArrayList<Integer> linesInStartStation = stationInfo.get(start);
        for(int line : linesInStartStation) {
            // {í˜„ì¬ ì—­, ì—­ì—ì„œ íƒˆ ìˆ˜ ìˆëŠ” ë…¸ì„ , í™˜ìŠ¹ íšŸìˆ˜} ê°ì²´ ìƒì„± ë° ì €ì¥ 
            queue.add(new Ticket(start, line, 0));
            // ì—­ì— ìˆëŠ” ëª¨ë“  ë…¸ì„ ì€ ë°©ë¬¸ ì²˜ë¦¬
            visitedLine[line] = true;
        }

        while(!queue.isEmpty()) {
            
            Ticket current = queue.poll();
            
            // (ì¢…ë£Œ) ë„ì°© ì—­ê³¼ ë™ì¼í•˜ë©´ ì§€ê¸ˆê¹Œì§€ í™˜ìŠ¹í•œ íšŸìˆ˜ ë°˜í™˜ 
            if(current.station == end) {
                return current.transferCount;
            }

            // íŠ¹ì • ë…¸ì„ ìœ¼ë¡œ ê°ˆ ìˆ˜ ìˆëŠ” ëª¨ë“  ì—­ ëª©ë¡ 
            ArrayList<Integer> stations = lineInfo.get(current.line);

            for(int nextStation : stations) {
                // ë‹¤ìŒ ì—­ì´ ì•„ì§ ë°©ë¬¸í•˜ì§€ ì•Šì€ ì—­ì¸ ê²½ìš°,
                if(visitedStation[nextStation] == false) {
                    visitedStation[nextStation] = true;
                    // í™˜ìŠ¹ ì—†ì´ í•´ë‹¹ ë…¸ì„ ì„ íƒ€ê³  ê·¸ëŒ€ë¡œ ë‹¤ìŒ ì—­ìœ¼ë¡œ ê°ˆ ìˆ˜ ìˆìœ¼ë¯€ë¡œ => transferCount ì¦ê°€ ì•ˆí•¨
                    queue.add(new Ticket(nextStation, current.line, current.transferCount));
                }

                // ë‹¤ìŒì— ì´ë™í•  ì—­ì—ì„œ í™˜ìŠ¹í•  ìˆ˜ ìˆëŠ” ë…¸ì„  ëª©ë¡
                ArrayList<Integer> lines = stationInfo.get(nextStation);
                for(int nextLine : lines) {
                    // ì•„ì§ ë‹¤ìŒ ë…¸ì„ ì„ ì´ìš©í•´ë³¸ì ì´ ì—†ëŠ” ê²½ìš°,
                    if(visitedLine[nextLine] == false) {
                        visitedLine[nextLine] = true;
                        // í•´ë‹¹ ì—­ì—ì„œ ë‹¤ë¥¸ ë…¸ì„ ìœ¼ë¡œ í™˜ìŠ¹í•´ì„œ ê°€ëŠ” ê²½ìš°
                        queue.add(new Ticket(nextStation, nextLine, current.transferCount+1));
                    }
                }
            }
        }
        return -1;
    }
}
```

## How to Approach

### 1. ë¬¸ì œ í•µì‹¬, ëª©í‘œ
ë³¸ ë¬¸ì œì˜ í•µì‹¬ì€ 'í•œ ì§€í•˜ì²  ì—­ì—ì„œ ë‹¤ë¥¸ ì§€í•˜ì²  ì—­ìœ¼ë¡œ ì´ë™í•  ë•Œ, ê°€ì¥ ì ì€ íšŸìˆ˜ì˜ ë…¸ì„ ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒ'ì´ë‹¤.  

### 2. ë…¸ì„  ë³„ ì •ì°¨ì—­ ë¦¬ìŠ¤íŠ¸, ì—­ ë³„ ì§€ë‚˜ê°€ëŠ” ë…¸ì„  ë¦¬ìŠ¤íŠ¸ ìƒì„±
ë¨¼ì € ë¬¸ì œë¥¼ í†µí•´ ë…¸ì„  ë³„ë¡œ ì •ì°¨í•˜ëŠ” ì—­ì˜ ë¦¬ìŠ¤íŠ¸ì™€ ì—­ ë³„ë¡œ ì •ì°¨í•˜ëŠ” ë…¸ì„ ì˜ ë¦¬ìŠ¤íŠ¸ ê°ê°ì„ ë§Œë“¤ì—ˆë‹¤. ë‹¤ë¥¸ ë¶„ë“¤ì˜ ë¬¸ì œ í•´ì„¤ì„ ë³´ë©´ ì¤‘ì²©ëœ êµ¬ì¡°ì˜ ArrayList ë˜ëŠ” ë°°ì—´ í˜•íƒœì˜ ArrayListë¥¼ ì‚¬ìš©í•˜ëŠ”ë°, ë‚˜ëŠ” í•´ì‹œë§µ êµ¬ì¡°ë¡œ í•˜ë©´ ë” ë¹ ë¥´ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆì„ ê²ƒì´ë¼ íŒë‹¨í•˜ì—¬ ì´ë¥¼ ì´ìš©í•˜ì˜€ë‹¤.

```java
static HashMap<Integer, ArrayList<Integer>> lineInfo = new HashMap<>();      // ë…¸ì„  ë³„ ì •ì°¨í•˜ëŠ” ì—­ì˜ ìˆ˜ -> ë…¸ì„  ë§Œí¼ì˜ ê°¯ìˆ˜ í• ë‹¹
static HashMap<Integer, ArrayList<Integer>> stationInfo = new HashMap<>();   // ì—­ ë³„ ì •ì°¨í•˜ëŠ” ë…¸ì„ ì˜ ìˆ˜ -> ì—­ ë§Œí¼ì˜ ê°¯ìˆ˜ í• ë‹¹
```

ê° í•´ì‹œë§µì— ë¬¸ì œì—ì„œ ì£¼ì–´ì§€ëŠ” ê°’ì„ ì•Œë§ê²Œ ì‚½ì…í•˜ì˜€ë‹¤.

```java
...
for(int i=1; i<=L; i++) {
    // ë‹¤ìŒ Lê°œì˜ ì¤„ì—ëŠ” ê° ë…¸ì„ ì´ ì§€ë‚˜ëŠ” ì—­ì´ ìˆœì„œëŒ€ë¡œ ì£¼ì–´ì§€ë©°,
    String[] l = br.readLine().split(" ");
    for (String station : l) {
        ...
        // ì—­ ë§ˆë‹¤ ì •ì°¨í•˜ëŠ” ë…¸ì„  í•´ì‹œë§µ ìƒì„± (lineInfo)
        if (lineInfo.get(i) == null) {
            ArrayList<Integer> stationsWhereLineStop = new ArrayList<>();
            stationsWhereLineStop.add(s);
            lineInfo.put(i, stationsWhereLineStop);
        } else {
            lineInfo.get(i).add(s);
        }

        // ë…¸ì„ ë§ˆë‹¤ ì •ì°¨í•˜ëŠ” ì—­ í•´ì‹œë§µ ìƒì„± (stationInfo)
        if (stationInfo.get(s) == null) {
            ArrayList<Integer> lineInStation = new ArrayList<>();
            lineInStation.add(i);
            stationInfo.put(s, lineInStation);
        } else {
            stationInfo.get(s).add(i);
        }
    }
}
...
```

ë¬¸ì œ ìƒ˜í”Œì— í•´ë‹¹í•˜ëŠ” ì •ë³´ë¥¼ í† ëŒ€ë¡œ ë§Œë“¤ì–´ì§„ ê°’ì„ ì¶œë ¥í•˜ë©´ ì•„ë˜ì™€ ê°™ì„ ê²ƒì´ë‹¤.

```
# lineInfo
- [1] : 1 2 3 4 5 
- [2] : 9 7 10 
- [3] : 7 6 3 8 

# stationInfo
- [1] : 1 
- [2] : 1 
- [3] : 1 3 
- [4] : 1 
- [5] : 1 
- [6] : 3 
- [7] : 2 3 
- [8] : 3 
- [9] : 2 
- [10] : 2 
```

### 3. ì—­ ì¬ë°©ë¬¸ ë˜ëŠ” ë…¸ì„  ì¬íƒ‘ìŠ¹ì„ ë§‰ê¸° ìœ„í•œ ë°°ì—´ ì„ ì–¸

ì¶”ê°€ë¡œ í•œë²ˆì´ë¼ë„ ë°©ë¬¸í•œ ì—­ ë˜ëŠ” ì‚¬ìš©í•œ ë…¸ì„ ì„ ì²´í¬í•  ìˆ˜ ìˆëŠ” ë°°ì—´ì„ ì„ ì–¸í•œë‹¤. ì´ì „ì— ë°©ë¬¸í–ˆë˜ ì—­ì— ë‹¤ì‹œ ë°©ë¬¸í•˜ê±°ë‚˜ ì´ì „ì— ì‚¬ìš©í–ˆë˜ ë…¸ì„ ì„ ë‹¤ì‹œ ì‚¬ìš©í•˜ëŠ” ê²ƒì€, ë™ì¼í•œ ë™ì‘ì„ ê³„ì† ë°˜ë³µí•˜ëŠ” loop í˜•íƒœë¥¼ ë§Œë“¤ê¸° ë•Œë¬¸ì— visited ì—¬ë¶€ë¥¼ í™•ì¸í•œë‹¤. ê° ë°°ì—´ì˜ í¬ê¸°ëŠ” ë¬¸ì œë¡œë¶€í„° ì „ë‹¬ë°›ì€ ê°’ì„ ì´ìš©í•œë‹¤.

```java
static boolean[] visitedLine;
static boolean[] visitedStation;
...
visitedStation = new boolean[N+1];
visitedLine = new boolean[L+1];
```

### 4. BFS

ë³¸ ë¬¸ì œê°€ 'ì¶œë°œì§€ë¶€í„° ëª©ì ì§€ê¹Œì§€ ê°ˆ ìˆ˜ ìˆëŠ” ëª¨ë“  ê²½ìš°ì˜ ìˆ˜'ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ ëª©í‘œì˜€ë‹¤ë©´ DFSë¥¼ ì‚¬ìš©í–ˆì§€ë§Œ, ìµœë‹¨ í™˜ìŠ¹ê²½ë¡œë¥¼ í™•ì¸í•˜ë©´ ë˜ëŠ” ë¬¸ì œì´ê¸° ë•Œë¬¸ì— BFSë¥¼ ì‚¬ìš©í•œë‹¤.

#### 4.1. í˜„ ì‹œì ì—ì„œì˜ ì´ë™ì •ë³´ë¥¼ ë‹´ëŠ” í´ë˜ìŠ¤ ìƒì„±

í˜„ ì‹œì ì—ì„œ <u>ì—­ì˜ ìœ„ì¹˜</u>ì™€ í˜„ì¬ í•´ë‹¹ ì—­ìœ¼ë¡œ ì´ë™í•  ë•Œ <u>ì‚¬ìš©ì¤‘ì¸ ë…¸ì„ </u>, ê·¸ë¦¬ê³  ì—¬ê¸°ê¹Œì§€ ì˜¬ ë™ì•ˆ <u>í™˜ìŠ¹í•œ ì´ íšŸìˆ˜</u>ë¥¼ í•˜ë‚˜ì˜ í´ë˜ìŠ¤ë¡œ ë§Œë“¤ì–´ì„œ ê´€ë¦¬í•œë‹¤. 

```java
class Ticket {
    int station;
    int line;
    int transferCount;
    public Ticket(int station, int line, int transferCount) {
        this.station = station;
        this.line = line;
        this.transferCount = transferCount;
    }
}
```

#### 4.2. ìš°ì„ ìˆœìœ„ í ìƒì„±

BFSëŠ” ê¸°ë³¸ì ìœ¼ë¡œ í(Queue)ë¥¼ ì‚¬ìš©í•œë‹¤. ë³¸ ë¬¸ì œì—ì„œëŠ” ë™ì¼í•œ ì—­ì´ë¼ í•˜ë”ë¼ë„ ì˜¬ ë•Œ ê¹Œì§€ ì‚¬ìš©í•œ ë…¸ì„ ì˜ ìˆ˜ëŠ” ì œê°ê°ì´ê¸° ë•Œë¬¸ì—, íì˜ ìˆœì„œë¥¼ í•­ìƒ ê´€ë¦¬í•˜ì—¬ ê°€ì¥ ì ì€ í™˜ìŠ¹ íšŸìˆ˜ë¥¼ ë¨¼ì € í™•ì¸í•˜ë„ë¡ í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤. ê·¸ë¦¬í•˜ì—¬ ìš°ì„ ìˆœìœ„ íë¥¼ ì‚¬ìš©í•˜ì˜€ê³ , í•´ë‹¹ íëŠ” í™˜ìŠ¹ íšŸìˆ˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì˜¤ë¦„ì°¨ìˆœí•˜ë„ë¡ êµ¬ì„±í•˜ì˜€ë‹¤.

```java
PriorityQueue<Ticket> queue = new PriorityQueue<>(
    Comparator.comparingInt(t -> t.transferCount)
);
```

#### 4.3. ë°ì´í„° í™•ì¸

ë¨¼ì € ì‹œì‘ì—­ì—ì„œ íƒ‘ìŠ¹ ê°€ëŠ¥í•œ ë…¸ì„  ëª©ë¡ì„ ëª¨ë‘ íì— ì‚½ì…í•œë‹¤. 

```java
// ì‹œì‘ ì—­ì—ì„œ íƒˆ ìˆ˜ ìˆëŠ” ëª¨ë“  ë…¸ì„  ì •ë³´ë¥¼ ë¨¼ì € ìš°ì„ ìˆœìœ„ íì— ì €ì¥
ArrayList<Integer> linesInStartStation = stationInfo.get(start);
for(int line : linesInStartStation) {
    // {í˜„ì¬ ì—­, ì—­ì—ì„œ íƒˆ ìˆ˜ ìˆëŠ” ë…¸ì„ , í™˜ìŠ¹ íšŸìˆ˜} ê°ì²´ ìƒì„± ë° ì €ì¥ 
    queue.add(new Ticket(start, line, 0));
    // ì—­ì— ìˆëŠ” ëª¨ë“  ë…¸ì„ ì€ ë°©ë¬¸ ì²˜ë¦¬
    visitedLine[line] = true;
}
```

ê·¸ë¦¬ê³  íë¥¼ ëª¨ë‘ í™•ì¸í•  ë•Œ ê¹Œì§€ ì•„ë˜ì˜ ìˆœì„œë¥¼ ë°˜ë³µí•œë‹¤.

1. íì— ìˆëŠ” ì´ë™ì •ë³´ í´ë˜ìŠ¤ë¥¼ í•˜ë‚˜ ë¹¼ë‚¸ë‹¤.
  - í•´ë‹¹ ì´ë™ì •ë³´ì— ì í˜€ìˆëŠ” ì—­ì˜ ì´ë¦„ì´ ëª©ì ì§€ì™€ ë™ì¼í•˜ë©´ ë°”ë¡œ ì¢…ë£Œ  
2. ì•„ì§ ë°©ë¬¸í•´ë³´ì§€ ì•Šì€ ì—­ì¸ì§€ í™•ì¸
  - í•´ë‹¹ ì—­ì—ì„œë¶€í„° ë™ì¼í•œ ë…¸ì„ ìœ¼ë¡œ ì´ë™í•  ìˆ˜ ìˆëŠ”(í™˜ìŠ¹ No) ì—­ì„ ì°¾ì•„ì„œ íì— ì‚½ì…
  - í•´ë‹¹ ì—­ì—ì„œ í™˜ìŠ¹í•  ìˆ˜ ìˆëŠ” ë…¸ì„ ì˜ ëª©ë¡ì„ ë³´ê³ , ì•„ì§ í•œë²ˆë„ ì´ìš©í•˜ì§€ ì•Šì€ ë…¸ì„ ì„ í™•ì¸
  - ê°ˆì•„íƒ„ ë…¸ì„ ìœ¼ë¡œë¶€í„° ê°ˆ ìˆ˜ ìˆëŠ” ë‹¤ë¥¸ ì—­ì„ ì°¾ì•„ íì— ì‚½ì…

ì´ë¥¼ ì½”ë“œë¡œ í‘œí˜„í•˜ë©´ ì•„ë˜ì™€ ê°™ë‹¤.

```java
while(!queue.isEmpty()) {
    Ticket current = queue.poll();
    
    // (ì¢…ë£Œ) ë„ì°© ì—­ê³¼ ë™ì¼í•˜ë©´ ì§€ê¸ˆê¹Œì§€ í™˜ìŠ¹í•œ íšŸìˆ˜ ë°˜í™˜ 
    if(current.station == end) {
        return current.transferCount;
    }

    // íŠ¹ì • ë…¸ì„ ìœ¼ë¡œ ê°ˆ ìˆ˜ ìˆëŠ” ëª¨ë“  ì—­ ëª©ë¡ 
    ArrayList<Integer> stations = lineInfo.get(current.line);

    for(int nextStation : stations) {
        // ë‹¤ìŒ ì—­ì´ ì•„ì§ ë°©ë¬¸í•˜ì§€ ì•Šì€ ì—­ì¸ ê²½ìš°,
        if(visitedStation[nextStation] == false) {
            visitedStation[nextStation] = true;
            // í™˜ìŠ¹ ì—†ì´ í•´ë‹¹ ë…¸ì„ ì„ íƒ€ê³  ê·¸ëŒ€ë¡œ ë‹¤ìŒ ì—­ìœ¼ë¡œ ê°ˆ ìˆ˜ ìˆìœ¼ë¯€ë¡œ => transferCount ì¦ê°€ ì•ˆí•¨
            queue.add(new Ticket(nextStation, current.line, current.transferCount));
        }

        // ë‹¤ìŒì— ì´ë™í•  ì—­ì—ì„œ í™˜ìŠ¹í•  ìˆ˜ ìˆëŠ” ë…¸ì„  ëª©ë¡
        ArrayList<Integer> lines = stationInfo.get(nextStation);
        for(int nextLine : lines) {
            // ì•„ì§ ë‹¤ìŒ ë…¸ì„ ì„ ì´ìš©í•´ë³¸ì ì´ ì—†ëŠ” ê²½ìš°,
            if(visitedLine[nextLine] == false) {
                visitedLine[nextLine] = true;
                // í•´ë‹¹ ì—­ì—ì„œ ë‹¤ë¥¸ ë…¸ì„ ìœ¼ë¡œ í™˜ìŠ¹í•´ì„œ ê°€ëŠ” ê²½ìš°
                queue.add(new Ticket(nextStation, nextLine, current.transferCount+1));
            }
        }
    }
}
```